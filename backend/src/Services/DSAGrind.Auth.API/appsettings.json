{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "Auth": {
    "Host": "0.0.0.0",
    "Port": "8080"
  },
  "Cors": {
    "AllowedOrigins": ["http://localhost:5000", "https://localhost:5000"]
  },
  "JwtSettings": {
    "Secret": "${JWT_SECRET}",
    "Issuer": "${JWT_ISSUER:DSAGrind}",
    "Audience": "${JWT_AUDIENCE:DSAGrind-Users}",
    "AccessTokenExpirationMinutes": 15,
    "RefreshTokenExpirationDays": 7,
    "ValidateIssuer": true,
    "ValidateAudience": true,
    "ValidateLifetime": true,
    "ValidateIssuerSigningKey": true,
    "ClockSkewMinutes": 5
  },
  "MongoDbSettings": {
    "ConnectionString": "${MONGODB_CONNECTION_STRING:mongodb://localhost:27017}",
    "DatabaseName": "${MONGODB_DATABASE_NAME:dsagrind}",
    "MaxConnectionPoolSize": 100,
    "MinConnectionPoolSize": 10,
    "MaxConnectionIdleTimeMinutes": 30,
    "MaxConnectionLifeTimeMinutes": 30,
    "ConnectTimeoutSeconds": 30,
    "SocketTimeoutSeconds": 0,
    "ServerSelectionTimeoutSeconds": 30,
    "RetryWrites": true,
    "RetryReads": 1
  },
  "KafkaSettings": {
    "BootstrapServers": "${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}",
    "Username": "${KAFKA_USERNAME:}",
    "Password": "${KAFKA_PASSWORD:}",
    "SecurityProtocol": "PLAINTEXT",
    "SaslMechanism": "PLAIN",
    "GroupId": "dsagrind-auth-service",
    "EnableAutoCommit": false,
    "SessionTimeoutMs": 30000,
    "HeartbeatIntervalMs": 3000,
    "MaxPollRecords": 500,
    "AutoOffsetReset": "earliest",
    "RequestTimeoutMs": 30000,
    "RetryBackoffMs": 100,
    "MessageMaxBytes": 1000000,
    "CompressionType": 0,
    "EnableIdempotence": true,
    "Acks": -1,
    "Retries": 2147483647,
    "MaxInFlightRequestsPerConnection": 5
  },
  "RedisSettings": {
    "ConnectionString": "${REDIS_CONNECTION_STRING:localhost:6379}",
    "Password": "${REDIS_PASSWORD:}",
    "Database": ${REDIS_DATABASE:0},
    "ConnectTimeoutSeconds": 30,
    "SyncTimeoutSeconds": 30,
    "CommandTimeoutSeconds": 30,
    "AbortOnConnectFail": false,
    "AllowAdmin": false,
    "ConnectRetryCount": 3,
    "KeepAliveSeconds": 60,
    "DefaultKeyPrefix": "dsagrind:auth:",
    "UserCacheExpirationMinutes": 30,
    "ProblemCacheExpirationMinutes": 60,
    "CategoryCacheExpirationMinutes": 120,
    "SubmissionCacheExpirationMinutes": 15,
    "RateLimitWindowMinutes": 1,
    "LoginAttemptsLimit": 5,
    "SubmissionAttemptsLimit": 10,
    "ApiRequestsLimit": 100
  },
  "OAuthSettings": {
    "Google": {
      "ClientId": "${GOOGLE_CLIENT_ID}",
      "ClientSecret": "${GOOGLE_CLIENT_SECRET}",
      "RedirectUri": "http://localhost:5000/api/oauth/google/callback",
      "Scopes": ["openid", "email", "profile"],
      "AuthorizationEndpoint": "https://accounts.google.com/o/oauth2/v2/auth",
      "TokenEndpoint": "https://oauth2.googleapis.com/token",
      "UserInfoEndpoint": "https://www.googleapis.com/oauth2/v2/userinfo"
    },
    "GitHub": {
      "ClientId": "${GITHUB_CLIENT_ID}",
      "ClientSecret": "${GITHUB_CLIENT_SECRET}",
      "RedirectUri": "http://localhost:5000/api/oauth/github/callback",
      "Scopes": ["user:email"],
      "AuthorizationEndpoint": "https://github.com/login/oauth/authorize",
      "TokenEndpoint": "https://github.com/login/oauth/access_token",
      "UserInfoEndpoint": "https://api.github.com/user",
      "UserEmailEndpoint": "https://api.github.com/user/emails"
    }
  },
  "EmailSettings": {
    "SmtpHost": "${SMTP_HOST:smtp.gmail.com}",
    "SmtpPort": ${SMTP_PORT:587},
    "UseSsl": true,
    "Username": "${SMTP_USERNAME}",
    "Password": "${SMTP_PASSWORD}",
    "FromEmail": "${FROM_EMAIL:noreply@dsagrind.com}",
    "FromName": "DSAGrind",
    "IsEnabled": true,
    "TimeoutSeconds": 30,
    "MaxRetries": 3,
    "BaseUrl": "http://localhost:5000"
  },
  "Serilog": {
    "Using": ["Serilog.Sinks.Console", "Serilog.Sinks.File"],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} {Level:u3}] {Message:lj} {Properties:j}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "logs/auth-service-.txt",
          "rollingInterval": "Day",
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} {Level:u3}] {Message:lj} {Properties:j}{NewLine}{Exception}"
        }
      }
    ],
    "Enrich": ["FromLogContext"]
  },
  "RabbitMQSettings": {
    "ConnectionString": "${RABBITMQ_CONNECTION_STRING:amqp://guest:guest@localhost:5672/}",
    "Username": "${RABBITMQ_USERNAME:guest}",
    "Password": "${RABBITMQ_PASSWORD:guest}",
    "VirtualHost": "${RABBITMQ_VIRTUAL_HOST:/}",
    "Port": "${RABBITMQ_PORT:5672}",
    "HostName": "${RABBITMQ_HOSTNAME:localhost}",
    "UseSSL": "${RABBITMQ_USE_SSL:false}"
  },
  "ConnectionStrings": {
    "Redis": "${REDIS_CONNECTION_STRING:localhost:6379}"
  }
}